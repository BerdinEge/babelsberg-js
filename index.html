<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Babelsberg/JS</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Babelsberg-js</h1>
        <p>A LivelyKernel implementation of Babelsberg</p>

        <p class="view"><a href="https://github.com/babelsberg/babelsberg-js">View the Project on GitHub <small>babelsberg/babelsberg-js</small></a></p>

        <ul>
          <li><a href="https://github.com/babelsberg/babelsberg-js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/babelsberg/babelsberg-js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/babelsberg/babelsberg-js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
<h1><a name="babelsbergjs" class="anchor" href="#babelsbergjs"><span class="octicon octicon-link"></span></a>Babelsberg/JS</h1>

	<p><a href="https://travis-ci.org/babelsberg/babelsberg-js"><img src="https://travis-ci.org/babelsberg/babelsberg-js.png?branch=master" alt="Build Status"></a></p>

<h2><a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h2>

	<p>It allows you to do stuff like this</p>
	
	<div class="highlight highlight-javascript"><pre><span class="nx">z3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ServerZ3</span><span class="p">()</span>
<span class="nx">z3</span><span class="p">.</span><span class="nx">reset</span><span class="p">()</span>
<span class="nx">a</span> <span class="o">=</span> <span class="nx">lively</span><span class="p">.</span><span class="nx">morphic</span><span class="p">.</span><span class="nx">Morph</span><span class="p">.</span><span class="nx">makeRectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nx">b</span> <span class="o">=</span> <span class="nx">lively</span><span class="p">.</span><span class="nx">morphic</span><span class="p">.</span><span class="nx">Morph</span><span class="p">.</span><span class="nx">makeCircle</span><span class="p">(</span><span class="nx">pt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="nx">always</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">solver</span><span class="o">:</span> <span class="nx">z3</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">().</span><span class="nx">dist</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">())</span> <span class="o">==</span> <span class="mi">200</span>
<span class="p">}</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">()</span> <span class="c1">// lively.pt(0.5,-200.0)</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">()</span> <span class="c1">// lively.pt(0.0,0.0)</span>

<span class="nx">a</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="nx">pt</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">()</span> <span class="c1">// lively.pt(100.0,100.0)</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">()</span> <span class="c1">// lively.pt(99.9,300.0)</span>
</pre></div>
	
	<p>Basically, you can write constraints using the <code>always</code> primitive that you always want to be true,
	using existing object-oriented abstractions (I am using the methods <code>getPosition</code> and
	<code>dist</code> in the example above), and the system will maintain them. The extent to which the
	system is able to keep constraints satisfied depends on the solver that is used. This
	implementation provides Z3, DeltaBlue, and Cassowary.</p>
	
	<p>We have used this to implement electrical simulations, a simulation of the Lively Engine,
	and some graphical layouting examples. The implementation is available to try at <a href="http://lively-web.org/users/robertkrahn/2013-10-16_first-constrained-steps.html">lively-web.org</a>.
	At any given time it may be broken, though, because the code is changing fairly often.</p>
	

<h2><a name="download" class="anchor" href="#download"><span class="octicon octicon-link"></span></a>Download</h2>

    <p>A LivelyKernel implementation of Babelsberg licensed under <a href="https://github.com/timfel/babelsberg-js/blob/master/LICENSE">3-clause BSD</a></p>
    
    <p>TODO</p><!--
    <p>TODO: <strong>Variants:</strong></p>
    <li><a href="http://timfel.github.io/babelsberg-js/babelsberg.mini.prototype.js">Download <strong>Babelsberg</strong></a></li>
          <li><a href="http://timfel.github.io/babelsberg-js/examples/fabric/layout.html">View <strong>Example</strong></a></li>
     
    <p>babelsberg.min</p>
    <p>babelsberg.min.prototype (includes prototype.js)</p>
    <p>babelsberg.min.solvers (includes all solvers)</p>
    <p>babelsberg.min.full (includes prototype.js as well as all solvers; standalone version for simple integration in browser pages)</p>
    <p>+ non-minified development versions (one file)</p>
    <p>+ solver with adapters</p>
	<p>TODO: adjust build script</p>
	-->
<h2><a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

	<p>TODO</p><!--
	<p>TODO: csp example on gh-pages</p>
	<p>TODO: examples should use lively.org-version of the library</p>
	<p>TODO: adjust links to babelsberg</p>
	-->
	<p><a href="http://babelsberg.github.io/babelsberg-js/examples/fabric/layout.html">fabric.js layout</a></p>
	<p><a href="http://babelsberg.github.io/babelsberg-js/examples/csp/map.html">map coloring</a></p>
	<p>A page with more variety of examples is at <a href="http://lively-kernel.org/babelsberg/users/timfelgentreff/babelsberg-js.html">lively-kernel.org</a>.</p>

<h2><a name="gettingstarted" class="anchor" href="#gettingstarted"><span class="octicon octicon-link"></span></a>Getting Started</h2>

	<p>TODO</p><!--

	-->
<h2><a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

	<p>TODO</p><!--
<h3><a name="apireference" class="anchor" href="#apireference"><span class="octicon octicon-link"></span></a>API Reference</h3>

	<p>TODO: generate from jsdocs?</p>
	<p>short synopsis per solver</p>
	<p>babelsbergscript + differences when use short cut always; look at paper.js describtion</p>
	<p>always + options: allowUnsolvableOperations, debugging, (verbose)</p>
	<p>stay; readOnly; hard/soft constraints; execute</p>

<h3><a name="wiki" class="anchor" href="#wiki"><span class="octicon octicon-link"></span></a>Wiki</h3>
	-->
	
<h2><a name="contribute" class="anchor" href="#contribute"><span class="octicon octicon-link"></span></a>Contribute</h2>

	<p>TODO</p><!--
	<p>E.g. by adding new solvers. State requirenments for new solvers. </p>
	-->
	
	<p>Report issues on the <a href="http://github.com/babelsberg/babelsberg-js/issues">issues page</a>.</p>

<h2><a name="seealso" class="anchor" href="#seealso"><span class="octicon octicon-link"></span></a>See also</h2>

    <p>Babelsberg in other languages:
    <ul>
      <li><a href="https://github.com/babelsberg/babelsberg-r">Babelsberg/R</a></li>
      <li><a href="https://github.com/babelsberg/babelsberg-s">Babelsberg/S</a></li>
      <li><a href="https://github.com/babelsberg/pybelsberg">Pybelsberg</a></li>
    </ul>
    </p>

<p>
<a href="https://github.com/timfel">timfel</a> also presented this work at the <a href="http://craft-conf.com/2014/">CRAFT</a> conference.
A video of his talk is available <a href="https://onedrive.live.com/redir?resid=FCA2914EE7038C6F!17380&amp;authkey=!AEJgnZ0och8WeE4&amp;ithint=video%2c.mp4">here</a>.
Papers about this implementation are forthcoming. A freely accessible technical report was published <a href="http://opus.kobv.de/ubp/volltexte/2014/6729/pdf/tbhpi81.pdf">here</a>.
</p>

<p>Created under a grant from Hasso Plattner Institute <img src="http://upload.wikimedia.org/wikipedia/de/c/c9/Hpi_logo.png" alt="HPI Logo" width="50" height="50"></p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/timfel">timfel</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-25791824-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>